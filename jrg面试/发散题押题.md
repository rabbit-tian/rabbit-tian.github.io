
#### 发散题
1. 什么是DOCTYPE及作用
    1. DTD(document type definition,文档类型定义)是一系列语法规则，用来定义XML和HTML的文件类型，浏览器使用它来判断文档类型，决定使用何种协议解析，以及切换浏览器模式。
        - 一句话：DTD告诉浏览器我是什么文档类型，浏览器根据这个来判断我用什么引擎来解析它，渲染它
    2. DOCTYPE是用来声明文档类型和DTD规范的，一个主要用途就是文件合法性的验证，如果文件代码不合法，那么浏览器解析时就会出一些差错。
        - 直接告诉浏览器什么是DTD
    3. 常见的DOCTYPE有哪些
        - HTML5   <!DOCTYPE html>
        - 4.0版本
            - 严格模式：该DTD包含所有的HTML元素和属性，但不包含展示性和弃用的元素（比如font）
            - 宽松模式：该DTD包含所有的HTML元素和属性，包含展示性和弃用的元素（比如font）

2. 从输入 URL 到页面展现中间发生了什么？
    - DNS 查询 DNS 缓存
    - 建立 TCP 连接（三次握手）连接复用
    - 发送 HTTP 请求（请求的四部分）
    - 后台处理请求
        - 监听 80 端口
        - 路由
        - 渲染 HTML 模板
        - 生成响应
    - 发送 HTTP 响应
    - 关闭 TCP 连接（四次挥手）
    - 解析 HTML
    - 下载 CSS（缓存
    - 解析 CSS
    - 下载 JS（缓存
    - 解析 JS
    - 下载图片
    - 解析图片
    - 渲染 DOM 树
    - 渲染样式树
    - 执行 JS

3. 你没有工作经历吗？
    - 一开始就问，可以拜拜。
    - 中间问最后问，他想压价。
    - 解法：用项目打动它：你看下我的作品，跟一年经验的前端差距大吗？你们团队一年工作经验的前端，写的出来我这样的作品吗？凭我的作品，我觉得我可以胜任贵司的工作。

4. 你遇到过最难的问题是什么？
    - [参考](https://www.zhihu.com/question/35323603/answer/338796153)
5. 你的期望薪资是多少？ 你想要的工资 加 1000~2000。
6. 任何你不会的问题
    - 承认不会
    - 询问详细细节：你问的是不是XXX方面的知识？请问你想问的是哪方面知识？
    - 根据面试官的回答，向有利于自己的方向引导话题。
    

7. 渲染机制
    1. 浏览器渲染过程
        1. HTML按照HTML规则和解释器转成 DOM Tree
            - DOM Tree：二叉树结构
        2. Css按照Css规则和解释器转成 CSSOM tree
            - CSSOM tree: 按照树形结构一个个增加样式
        3. DOM Tree 和 CCSSOMSS Tree 一整和形成 Render Tree
        4. Render Tree 经过 Layout 计算DOM的具体位置和样式
        5. Painting 进行 画图，呈现内容
        6. Display 在浏览器上看到页面效果
    2. 重排Reflow
        1. DOM结构中各个元素都有自己的盒子（模型），这些都需要浏览器根据各种样式来计算，并根据计算结果将元素放到它该放的位置上，这个过程称为reflow
        2. 何时触发重排
            - 当修改，删除，增加DOM节点的时候，会发生reflow和repaint
            - 当改变css样式（比如宽高等）
            - 当resize窗口或者滚动页面时
            - 当改变网页默认字体时
    3. 重绘Repaint
        1. 当各种盒子的大小，位置以及各种属性都确认后，浏览器便会根据这些盒子的特性重新绘制一遍，于是内容出现了，这个过程称为重绘repaint
        2. 何时出发重绘：只要页面发生变化，就会导致重绘，无法避免
            - DOM改变
            - CSS改变
        3. 如何避免最小程度的repaint
            - 把要向浏览器中添加的内容都放在一个片段fragment中，最后一次添加，减少重绘
    4. 布局layout
        - Render Tree 经过 Layout 计算DOM的具体位置和样式,浏览器布局

    
8. js运行机制
    1. 如何理解js单线程：一个时间内，js只能看一件事
    2. 什么是任务队列
        1. 同步任务
        2. 异步任务
        3. 当同步任务执行后，再执行异步任务（注意时间限制）
    3. 什么是Event Loop，事件循环
        1. js引擎会把同步任务放在运行栈中（任务栈里都是同步任务）
        2. 把异步任务提出来，当定时器（0不是0，最小4ms）的时间走完时，再放入任务队列中
        3. 当运行栈中同步任务走完，再把异步任务放在运行栈中走
    4. 什么时候开启异步任务
        1. setTimeout 和 setInterval
        2. DOM事件
        3. ES6中的promise
    5. 例题1
    
        ```
        // 同步任务
        console.log(1)
        // 异步任务，要挂起
        setTimeout(function () {
            console.log(2)
        },0)
        // 同步任务
        console.log(3)
        ```
        - 结果： 1，3，2
        - 分析：先处理同步任务，再处理异步任务 
        
    6. 例题2
        
        ```
        console.log(1)
        while(true) {
    
        }
        console.log(2)
        ```
        - 结果： 1
        - 解析：都是同步任务，while没有执行完，结果只有1
    
    7. 例题3
        
        ```
        console.log(1)
        setTimeout(function () {
            console.log(2)
        },0)
        while(true) {
    
        }
        ```
        - 结果： 1
        - 解析：先执行同步任务 ，while一直没有执行完，2就不会被打印出来

    8. 例题4
    
        ```
        for (var i = 0;i<4;i++) {
            setTimeout(function () {
                console.log(i)
            },0/1000)
        }
        ```
            
        - 结果： 4444
        - 解析：先执行同步任务 for循环i=0，再执行异步任务定时器，但是定时器还没到时间，for循环继续走i=1,当for循环走完到i=4后，时间到了ls，才会走定时器里面内容，打印出4个4

### 如何监控js错误/如何保证你的产品质量 =>  错误监控

1. 前端错误的分类
    - 即时运行错误：代码错误
    - 资源加载错误
2. 错误的捕获方式
    - 即时运行错误的捕获方式
        - try..catch
        - window.onerror,资源加载错误不会冒泡，所以window.onerror不能捕获此错误
    - 资源加载错误的捕获方式
        - object.onerror
        - performance.getEntries()，获取成功加载的资源，再拿所有的资源减去成功加载的资源，就是错误资源
        - Error事件捕获

            ```
window.addEventListener('error',function (e) {
                console.log(e)
            },true)
            ```
    - 延伸：跨域的js运行错误可以捕获吗，错误提示是什么，应该怎么处理？
        - 可以捕获
        - 错误信息：Script error
        - 如何处理
            - 客户端上：script标签上加crossorigin属性
            - 服务端上：设置js资源响应头Access-Control-Allow-Origin:*
3. 上报错误的基本原理
    - 采用ajax通信的方式上报
    - 利用Image对象上报
        `(new Image()).src="http://baidu.com/tesjk?r=ddf";`


